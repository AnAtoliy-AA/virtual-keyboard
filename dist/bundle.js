!function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var r=class{constructor(){this.domScreen="",this.createDomScreen()}createDomScreen(){const e=document.createElement("textarea");e.classList.add("virtual-screen"),this.domScreen=document.body.appendChild(e),this.domScreen.textContent="",this.domScreen.focus()}addSymbolToScreen(e){this.domScreen.setRangeText(e),this.rightArrowMove()}removeLastSymbol(){this.domScreen.selectionEnd-=1,this.domScreen.selectionEnd+=1,this.domScreen.setRangeText("")}removeRightSymbol(){this.domScreen.selectionEnd+=1,this.domScreen.setRangeText("")}addSpaceToScreen(){this.domScreen.setRangeText(" "),this.rightArrowMove()}addEnterToScreen(){this.domScreen.setRangeText("\n"),this.rightArrowMove()}leftArrowMove(){this.domScreen.selectionEnd-=1,this.domScreen.selectionStart=this.domScreen.selectionEnd}rightArrowMove(){this.domScreen.selectionEnd+=1,this.domScreen.selectionStart=this.domScreen.selectionEnd}addTabToScreen(){this.domScreen.setRangeText("\t"),this.rightArrowMove()}};var n=class{constructor(e,t,s,r,n,a,i,o,d,c){this.value=e,this.valueLabel=t,this.rusValue=s,this.rusValueLabel=r,this.keyCode=n,this.row=a,this.position=i,this.width=o,this.alternativeValue=d,this.rusAlternativeValue=c,this.id=n}};var a=function(){return[new n("`","~","ё","Ё",192,1,1,40,"~"),new n("1","1","1","1",49,1,2,40,"!","!"),new n("2","2","2","2",50,1,3,40,"@","@"),new n("3","3","3","3",51,1,4,40,"#","#"),new n("4","4","4","4",52,1,5,40,"$","$"),new n("5","5","5","5",53,1,6,40,"%","%"),new n("6","6","6","6",54,1,7,40,"^","^"),new n("7","7","7","7",55,1,8,40,"&","&"),new n("8","8","8","8",56,1,9,40,"*","*"),new n("9","9","9","9",57,1,10,40,"(","("),new n("0","0","0","0",48,1,11,40,")",")"),new n("-","-","-","-",189,1,12,40,"_","_"),new n("=","=","=","=",187,1,13,40,"+","+"),new n("backspace","Backspace","backspace","Backspace",8,1,14,110),new n("tab","Tab","tab","Tab",9,2,1,60),new n("q","Q","й","Й",81,2,2,40),new n("w","W","ц","Ц",87,2,3,40),new n("e","E","у","У",69,2,4,40),new n("r","R","к","К",82,2,5,40),new n("t","T","е","Е",84,2,6,40),new n("y","Y","н","Н",89,2,7,40),new n("u","U","г","Г",85,2,8,40),new n("i","I","ш","Ш",73,2,9,40),new n("o","O","щ","Щ",79,2,10,40),new n("p","P","з","З",80,2,11,40),new n("[","[","х","Х",219,2,12,40),new n("]","]","ъ","Ъ",221,2,13,40),new n("\\","\\","\\","\\",220,2,14,40,"|","/"),new n("del","DEL","del","DEL",46,2,15,40),new n("capsLock","Caps Lock","capsLock","Caps Lock",20,3,1,90),new n("a","A","ф","Ф",65,3,2,40),new n("s","S","ы","Ы",83,3,3,40),new n("d","D","в","В",68,3,4,40),new n("f","F","а","А",70,3,5,40),new n("g","G","п","П",71,3,6,40),new n("h","H","р","Р",72,3,7,40),new n("j","J","о","О",74,3,8,40),new n("k","K","л","Л",75,3,9,40),new n("l","L","д","Д",76,3,10,40),new n(";",";","ж","Ж",186,3,11,40),new n("'","'","Э","Э",222,3,12,40),new n("enter","Enter","enter","Enter",13,3,13,105),new n("","Shift","","Shift",16,4,1,110),new n("z","Z","я","Я",90,4,2,40),new n("x","X","ч","Ч",88,4,3,40),new n("c","C","с","С",67,4,4,40),new n("v","V","м","М",86,4,5,40),new n("b","B","и","И",66,4,6,40),new n("n","N","т","Т",78,4,7,40),new n("m","M","ь","Ь",77,4,8,40),new n(",",",","б","Б",188,4,9,40,"<"),new n(".",".","ю","Ю",190,4,10,40,">"),new n("/","/",".",".",191,4,11,40,"?",","),new n("","&uarr;","","&uarr;",38,4,12,40),new n("","Shift","","Shift",16,4,13,85),new n("","Ctrl","","Ctrl",17,5,1,40),new n("","Win","","Win",91,5,2,40),new n("","Alt","","Alt",18,5,3,40),new n("space","Space","space","Space",32,5,4,345),new n("","Alt","","Alt",18,5,5,40),new n("leftArrow","&larr;","leftArrow","&larr;",37,5,7,40),new n("","&darr;","","&darr;",40,5,8,40),new n("rightArrow","&rarr;","rightArrow","&rarr;",39,5,9,40),new n("","Ctrl","","Ctrl",17,5,6,40)]};var i=class{constructor(){this.englishLanguage="true"===sessionStorage.getItem("englishLanguage"),this.cssClassNameConfig={keyboardKeyActive:"keyboard__key_active"},this.vKeys=a(),this.domScreen=document.querySelector(".virtual-screen"),this.domKeyboard=this.createDomKeyboard(),this.domKeys=document.querySelectorAll(".keyboard__key"),this.addActiveKeyboardKey(),this.bindPhysicalKeyboardEvents(),this.capsLockEnabled=!1,this.shiftPressed=!1,this.keepPressedButtonsArray=[]}createDomKeyboard(){const{body:e}=document,t=document.createElement("div");e.appendChild(t),t.classList.add("virtual-keyboard");const s=a();for(let e=1;e<6;e+=1){const s=document.createElement("div");s.id=`row_${e}`,s.classList.add("keyboard__row"),t.appendChild(s)}for(let e=0;e<s.length;e+=1){const t=s[e],r=document.createElement("div");r.innerHTML=this.englishLanguage?t.valueLabel:t.rusValueLabel,r.style.width=`${t.width}px`,r.classList.add("keyboard__key"),r.id=t.id,document.getElementById(`row_${t.row}`).appendChild(r)}return document.querySelectorAll(".virtual-keyboard div")}addActiveKeyboardKey(){this.domKeys.forEach(e=>{e.addEventListener("mousedown",e=>{"20"!==e.target.id&&e.target.classList.add(this.cssClassNameConfig.keyboardKeyActive),this.pressKey(e)}),e.addEventListener("mouseup",()=>{this.domKeys.forEach(e=>this.removeClassKeyActive(e))})})}removeClassKeyActive(e){e.classList.remove(this.cssClassNameConfig.keyboardKeyActive)}bindPhysicalKeyboardEvents(){const e=[...this.domKeys];document.addEventListener("keydown",t=>{const s=e.find(e=>+e.id==+t.keyCode);void 0!==s&&("20"!==s.id&&s.classList.add(this.cssClassNameConfig.keyboardKeyActive),this.addKeepPressedButtonsArray(s.id),this.pressKey(t)),t.preventDefault()}),document.addEventListener("keyup",t=>{const s=e.find(e=>+e.id==+t.keyCode);void 0!==s&&(e.forEach(e=>this.removeClassKeyActive(e)),this.removeKeepPressedButtonsArray(s.id))})}addKeepPressedButtonsArray(e){-1===this.keepPressedButtonsArray.indexOf(e)&&this.keepPressedButtonsArray.push(e)}removeKeepPressedButtonsArray(e){const t=this.keepPressedButtonsArray.indexOf(e);this.keepPressedButtonsArray.splice(t,1)}toggleCapsLock(){this.capsLockEnabled=!this.capsLockEnabled,document.getElementById("20").classList.toggle("keyboard__caps-lock_active")}prepareSymbolToShowInScreen(e){let t="";return t=this.englishLanguage?this.capsLockEnabled?this.shiftPressed?e.alternativeValue||e.value.toLowerCase():e.value.toUpperCase():this.shiftPressed?e.alternativeValue||e.value.toUpperCase():e.value.toLowerCase():this.capsLockEnabled?this.shiftPressed?e.alternativeValue||e.rusValue.toLowerCase():e.rusValue.toUpperCase():this.shiftPressed?e.rusAlternativeValue||e.rusValue.toUpperCase():e.rusValue.toLowerCase(),t}analysePressedKeys(){2===this.keepPressedButtonsArray.filter(e=>"18"===e||"16"===e).length&&this.toggleEnglishLanguage(),1===this.keepPressedButtonsArray.filter(e=>"16"===e).length&&this.enableShift(),0===this.keepPressedButtonsArray.filter(e=>"16"===e).length&&this.disableShift()}enableShift(){this.shiftPressed=!0}disableShift(){this.shiftPressed=!1}toggleEnglishLanguage(){this.englishLanguage=!this.englishLanguage,sessionStorage.setItem("englishLanguage",this.englishLanguage),this.domKeys.forEach(e=>{const t=e,s=this.vKeys.find(e=>e.id===+t.id),r=s.valueLabel,n=s.rusValueLabel;t.innerHTML=this.englishLanguage?r:n})}pressKey(e){this.analysePressedKeys();const t=this.vKeys.find(t=>t.id===+e.target.id||t.id===+e.keyCode);switch(t.value){case"capsLock":this.toggleCapsLock();break;case"backspace":this.vScreen.removeLastSymbol();break;case"del":this.vScreen.removeRightSymbol();break;case"space":this.vScreen.addSpaceToScreen();break;case"tab":this.vScreen.addTabToScreen();break;case"enter":this.vScreen.addEnterToScreen();break;case"leftArrow":this.vScreen.leftArrowMove();break;case"rightArrow":this.vScreen.rightArrowMove();break;default:this.vScreen.addSymbolToScreen(this.prepareSymbolToShowInScreen(t))}}setScreen(e){this.vScreen=e}};document.body.onload=function(){const e=new r;(new i).setScreen(e)}}]);